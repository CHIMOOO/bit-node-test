# 动态脚本执行器

## 项目概述

这是一个基于Node.js开发的动态脚本执行系统，允许用户通过Web界面实时调用、测试和管理JavaScript模块。该项目采用纯前后端分离架构，无需构建步骤，开箱即用。

## 技术栈

- **运行环境**：Node.js (v14~v20)
- **包管理**：pnpm（比npm/yarn更快、更节省磁盘空间）
- **数据存储**：SQL.js（WebAssembly版SQLite，无需编译原生模块）
- **通信协议**：WebSocket + HTTP
- **前端技术**：原生JavaScript + 现代CSS（无框架依赖）

## 亮点功能

### 1. SQL.js数据库集成

使用SQL.js替代传统sqlite3，解决了跨平台原生模块编译问题：
- 完全基于WebAssembly实现，无需本地编译
- 保留SQLite完整功能和API
- 简化部署流程，提高兼容性

### 2. 实时文件监控与热更新

- 实时监控scripts目录变化
- 自动刷新可用模块列表
- 通过WebSocket推送更新通知
- 无需重启服务即可添加新功能

### 3. 交互式模块执行

- 一键执行任意JavaScript模块函数
- 自动参数解析和类型转换
- 详细的执行结果展示
- 完整的历史记录追踪

### 4. 内置数据库查询工具

- 预定义查询功能（最近记录、记录总数等）
- 自定义SQL查询支持，带安全检查
- 结构化结果显示
- 关键词搜索功能

### 5. 现代化UI设计

- 响应式布局，支持移动设备
- 简洁明了的卡片式设计
- 模块化组件结构
- 明亮主题，优化用户体验

## 快速开始

```bash
# 克隆仓库
git clone <仓库地址>
cd <项目目录>

# 使用pnpm安装依赖（推荐）
pnpm install

# 初始化数据库
pnpm run init-db

# 启动服务
pnpm start
```

启动后访问 http://localhost:8080 即可使用系统。

## 为什么选择pnpm？

- **更快的安装速度**：通过硬链接共享依赖，安装速度比npm/yarn快2-3倍
- **节省磁盘空间**：避免重复安装相同依赖
- **严格的依赖管理**：防止幽灵依赖问题
- **更好的monorepo支持**：内置工作区功能

## 为什么使用SQL.js而非sqlite3？

- **跨平台兼容性**：无需针对不同操作系统编译二进制模块
- **部署简化**：减少环境依赖，无需配置编译工具链
- **同样的API**：与sqlite3基本兼容，易于迁移
- **WebAssembly优势**：性能接近原生，且更安全

## 项目结构

```
├── main.js           # 主服务器和WebSocket实现
├── init-db.js        # 数据库初始化脚本
├── db.js             # 数据库查询模块
├── scripts/          # 可动态加载的脚本目录
│   ├── cat.js        # 示例模块
│   ├── dog.js        # 示例模块
├── calls.db          # SQLite数据库文件
└── package.json      # 项目配置文件
```

## 面向面试官的说明

本项目展示了我在以下方面的能力：

1. **全栈开发能力**：从后端数据库到前端UI的完整实现
2. **技术选型判断**：选择合适的技术解决特定问题
3. **实时通信实现**：WebSocket服务的集成和管理
4. **文件系统操作**：动态加载和执行模块
5. **用户体验设计**：直观友好的界面和交互逻辑
6. **数据库集成能力**：SQL查询和数据管理
7. **现代JavaScript应用**：使用最新ES特性构建应用

希望这个项目能够展示我的技术广度和解决问题的能力。我期待有机会与您讨论项目中的任何技术细节。
